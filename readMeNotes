Based on approach in Java Jugtours:
https://developer.okta.com/blog/2018/07/19/simple-crud-react-and-spring-boot


BASIC SPRING SECURITY MYSQL TUTORIAL:
https://www.youtube.com/watch?v=TNt3GHuayXs

----------------------------------
RESEARCH
  
- security research / links
- microservices links:
  https://www.udemy.com/course/spring-boot-microservices-with-spring-cloud-beginner-to-guru/

----------------------------------
Mon 30th Sept, Thurs-Fri 3rd/4th Oct
==> Tues + Wed in Oxford
==> TEAM PROJECT
==> RP

-----------------------------------
RP JOBS:

- backend methods tested with postman  (resume from basket controller)
- implement transactions and test in service tests
  [exception handling needs to be in the controllers]
- test rewriting controllers as JSON handlers


- service, integration and controller test POC
==> research java microservices
==> react bank docs and full gui structure

- poc handling errors as recommended in Controllers and React
- add in basic front end for basket and making a purchase
  --> basket handling, contact details, purchase, sale confirmation 
  --> apply mosh style error handling in front end
  --> overview of react unit tests  
- design admin flow and define security policy for system
- develop admin and member areas (keep it simple)
- apply security

----------------------------------

http://localhost:8080/
http://localhost:8080/home

http://localhost:8080/user
http://localhost:8080/admin*

http://localhost:8080/error


INTERNAL REACT APP:
react-routeplanner-app

- db: new_routeplanner_shopping
 - create table user (id bigint, active boolean, password varchar(50), roles varchar(50), user_name varchar(50) );
 
 
 ==========================================
 SETUP DATA (consider putting in data.sql....?)
 
 insert into user values (1, 1, 'pass', 'ROLE_USER', 'user'); 
 insert into user values (2, 1, 'pass', 'ROLE_ADMIN', 'admin');
 
  insert into route_query values(1, 'Farringdon', 'Oxford Circus', 1);
 
 insert into ticket values(1, 3, 1, 'dest1', 4, 'start1', 2, '2019-10-04' );
 
 insert into basket_tickets values (18, 1);
  insert into basket_tickets values (18, 3);
   insert into basket_tickets values (18, 7);
    insert into basket_tickets values (18, 13);

SQL TO CHECK THAT AN EMPTY USER'S BASKET HAS BEEN CREATED
select 
    b.id basketId, 
    b.open basketOpen,
    u.roles,
    u.user_name,
    cd.city,
    cd.id contactDetailsId
 from Basket B
 inner join contact_details cd on cd.id = b.contact_details_id
 inner join user u on u.id = cd.user_id
 where u.id = 1

SQL TO CHECK FOR TICKETS IN A USER'S BASKET
 select 
    b.id basketId, 
    b.open basketOpen,
    u.roles,
    u.user_name,
    cd.city,
    t.num_units numTickets,
    t.start,
    t.destination dest
 from Basket B
 inner join basket_tickets bt on bt.basket_id = b.id
 inner join ticket t on bt.tickets_id = t.id
 inner join contact_details cd on cd.id = b.contact_details_id
 inner join user u on u.id = cd.user_id
 where u.id = 2
 
 insert into contact_details values (
17, 'ad1', 'add2', 'add3', 'GHlasgow', 'countryV', 'dsf@sdf.com', 'fullnamneP', '987875', '765654', '435345', 'region', 'title', 1);


 
 
 ========================================== 
 
logs:
https://www.tutorialspoint.com/log4j/log4j_logging_files.htm


//  REACT ROUTES: ==> http://localhost:8080/
	//  --> routeplanner/                home
    //  --> routeplanner/login           login attempt 		
	//  --> routeplanner/query           query page after successful login


Apply registration page
Add admin pages + permissions

========================================================================

HttpSession sess = request.getSession();
    	sess.setAttribute("stationList", travelInfoService.getStationList());
    	sess.setAttribute("ticketTypeList", TicketType.values());
    	sess.setAttribute("passengerTypeList", PassengerType.values());
    	sess.setAttribute("cardTypeList", CardType.values());
    	sess.setAttribute("titleList", getTitleLiterals());
    	sess.setAttribute("currUser", user);
      	
    	
    	private String[] getTitleLiterals() {
    	return new String[] {"rp.person.title.mr", 
    			"rp.person.title.mrs", 
    			"rp.person.title.miss"};
    }
    
    	
    	
 Shopping
 --> basket
     --> ticketList
     --> open
     --> user
 --> order
     --> PaymentInfo
     --> ContactDetails
     --> Basket
     --> User
 --> purchase
     --> Order
     --> TransactionDate
     --> User

 ========================================================================
IDEAS FOR CONTROLLERS:
 
 //	@PostMapping("/contact")
//	ResponseEntity<ContactDetails> saveContactDetails(@Valid @RequestBody ContactDetails contactDetails) throws URISyntaxException {
//	    logger.info("Request to create contact details: {}", contactDetails);
//        registrationService.save(contactDetails);
//	    return ResponseEntity.created(new URI("/route/contact/" + contactDetails.getId()))
//	                .body(contactDetails);
//	}
//	
	
//	@GetMapping("/contact/{username}")
//    ResponseEntity<?> getContactDetails(@PathVariable String username) {
//        Optional<ContactDetails> contactDetails = registrationService.findByUsername(username);
//        return contactDetails.map(response -> ResponseEntity.ok().body(contactDetails))
//                .orElse(new ResponseEntity<>(HttpStatus.NOT_FOUND));
//		}
//	
 
 /*
	 * https://developer.okta.com/blog/2018/07/19/simple-crud-react-and-spring-boot
	 * Note: this is also the OCTA account!
	 * 
	@GetMapping("/group/{id}")
    ResponseEntity<?> getGroup(@PathVariable Long id) {
        Optional<Group> group = groupRepository.findById(id);
        return group.map(response -> ResponseEntity.ok().body(response))
                .orElse(new ResponseEntity<>(HttpStatus.NOT_FOUND));
    }
	*/
 
 
 
 
 ========================================================================
 
 
  
 
 
 
  
 
 
 
 
 
 
 
 
 
 
 